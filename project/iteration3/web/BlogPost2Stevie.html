<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ol{margin:0;padding:0}table td,table th{padding:0}.c0{orphans:2;widows:2;height:11pt}.c3{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c4{font-size:14pt;font-weight:bold}.c2{orphans:2;widows:2}.c1{font-size:12pt}.c5{text-indent:36pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c3"><div><p class="c2"><span class="c1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Stevie Frisbie</span></p></div><p class="c2"><span class="c4">Applying the Stamp tool to the display buffer</span></p><p class="c2"><span class="c1">// if the current tool is the stamp tool</span></p><p class="c2"><span class="c1">if (m_curTool == 7)</span></p><p class="c2"><span class="c1">{</span></p><p class="c2"><span class="c1">&nbsp; &nbsp; int height = m_displayBuffer-&gt;getHeight();</span></p><p class="c2"><span class="c1">&nbsp; &nbsp; int width = m_displayBuffer-&gt;getWidth();</span></p><p class="c2"><span class="c1">&nbsp; &nbsp; ColorData tempPixel;</span></p><p class="c2"><span class="c1">&nbsp; &nbsp; int bufferI, bufferJ;</span></p><p class="c2"><span class="c1">&nbsp; &nbsp; //loops through the stamp buffer array and applies each pixel to display buffer where the mouse currently is</span></p><p class="c2"><span class="c1">&nbsp; &nbsp; for (int i = 0; i &lt; stampWidth; i++)</span></p><p class="c2"><span class="c1">&nbsp; &nbsp; {</span></p><p class="c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; for (int j = 0; j &lt; stampHeight; j++)</span></p><p class="c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bufferI = x + i - (stampWidth/2);</span></p><p class="c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bufferJ = (height-y) + j - (stampHeight/2);</span></p><p class="c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (bufferI &gt; 0 &amp;&amp; bufferI &lt; width &amp;&amp; bufferJ &gt; 0 &amp;&amp; bufferJ &lt; height)</span></p><p class="c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tempPixel = stampBuffer-&gt;getPixel(i, j);</span></p><p class="c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; m_displayBuffer-&gt;setPixel(bufferI, bufferJ, tempPixel);</span></p><p class="c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c2"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c2"><span class="c1">}</span></p><p class="c0"><span class="c1"></span></p><p class="c2 c5"><span class="c1">This code is located in the mouseDown function in FlashPhotoApp.cpp. One of the main parts of this code is the stampBuffer variable which comes from the load stamp function which is also in FlashPhotoApp.cpp. The load stamp function loads the currently selected image file into the stampBuffer which is of type PixelBuffer.</span></p><p class="c2 c5"><span class="c1">Starting from the top of the code that is given above, the first if statement checks if the current tool is the stamp tool, which was the 8th tool in our tool array that was initialized. The height and width variables are simply the height and width of the m_displayBuffer which is the PixelBuffer that users can see and edit. These variables are necesarry to check if a pixel is out of bounds. I created a ColorData variable named tempPixel to store the ColorData of the current stampBuffer pixel so I could transfer the data to the displayBuffer. The bufferI and bufferJ variables are used to center the image that is being stamped around the mouse.</span></p><p class="c2 c5"><span class="c1">The first for-loop is iterating through the stamp image by its width and the second for-loop is iterating through the stamp image by its height. Each iteration of the double-for-loop saves the coordinates on the display pixelBuffer where the current Pixel will be saved. It then checks whether or not those coordinates are out of the bounds of the display PixelBuffer. If it is out of bounds it simply jumps to the next pixel from the stampBuffer array. If the if-statement does hold true and the coordinates of the pixel is inside the bounds of the displayBuffer, the ColorData is stored inside the tempPixel variable using the function getPixel. From this tempPixel variable, we can also use the setPixel function to change the ColorData of a specific pixel. We call the setPixel function on the actual display buffer that users can see and edit. Through the power of the for-loop and modern computing, the stampBuffer array is literally &ldquo;stamped&rdquo; onto the displayBuffer in the blink of an eye.</span></p><p class="c0"><span class="c1"></span></p></body></html>