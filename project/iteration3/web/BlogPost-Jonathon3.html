<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ol{margin:0;padding:0}table td,table th{padding:0}.c3{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c0{orphans:2;widows:2;height:11pt}.c1{orphans:2;widows:2}.c2{line-height:1.5}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c3"><p class="c1"><span>OBJFILES = $(addprefix $(OBJECT_DIR)/, &nbsp;$(notdir $(CPPFILES:.cpp=.o)))<br>EXECUTABLES = $(addprefix ./, $(notdir $(CPPFILES:.cpp=)))</span></p><p class="c0"><span></span></p><p class="c1"><span>all: setup tests<br><br>rebuild: clean all<br><br># Create the object_files directory only if it does not exist.<br>setup: | $(OBJECT_DIR)<br><br>$(OBJECT_DIR):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mkdir -p $(OBJECT_DIR)<br><br>tests: $(EXECUTABLES)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo &quot;Testing FlashPhoto:&quot;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;./test_blur<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;./test_calligraphypen<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;./test_eraser<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;./test_filterBlur<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;./test_filterChannel<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;./test_filterEdgeDetect<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;./test_filterMotionBlur<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;./test_filterQuantize<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;./test_filterSaturate<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;./test_filterSharpen<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;./test_filterSpecial<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;./test_filterThreshold<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;./test_highlighter<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;./test_pen<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;./test_spraycan<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;./test_stamp<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;./test_xpen<br><br><br><br>$(EXECUTABLES): &nbsp;$(OBJFILES) build/FlashPhoto.o $(GLUI_LIB) $(PNG_LIB) $(JPEG_LIB) $(LIBPHOTO_LIB)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$(CC) build/FlashPhoto.o $(LDFLAGS) $(LINK_LIBS) -o $@ $(OBJECT_DIR)/$@.o<br><br>$(OBJECT_DIR)/%.o: $(SOURCE_DIR)/%.cpp<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$(CC) $(CFLAGS) $(INCLUDE) &nbsp;-o $@ $&lt;<br><br>build/FlashPhoto.o: FlashPhotoApp.cpp src/FlashPhotoApp.h<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$(CC) $(CFLAGS) $(INCLUDE) -o build/FlashPhoto.o FlashPhotoApp.cpp</span></p><p class="c0"><span></span></p><p class="c0"><span></span></p><p class="c1 c2"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This is a portion of the code from the makefile in the tests directory. &nbsp;While I did not write the entire code and used the makefile from FlashPhoto as a template, I did quite a bit of modification to the original makefile to make it serve our testing purposes, through which I learned a lot about the specifics of many of the makefile operations used.</span></p><p class="c0 c2"><span></span></p><p class="c1 c2"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This piece of code compiles and runs all of the tests for the FlashPhoto tools and filters. &nbsp;In order to do this, it first compiles all of the test files into .o files. &nbsp;This portion is very similar to the method used in FlashPhoto. &nbsp;After this, however, the method diverges a bit. &nbsp;After this, it needs to build the tests as separate executables, but link each individual (test).o file with FlashPhoto.o in order to actually test FlashPhoto. &nbsp;In order to accomplish this, I needed to figure out what $@ and $&lt; mean, and once I did, I was able to figure out a way to do this with the one target command: EXECUTABLES, which I set up all in one variable in the same way OBJFILES are setup. &nbsp;It had OBJFILES, FlashPhoto.o, and all of the libraries as dependencies to ensure that they were all compiled before and ready to use in linking. &nbsp;After this, I still had problems, as I didn&rsquo;t understand the -g linking flag, and thus put FlashPhoto.o at the end of the command which caused it to fail. &nbsp;I solved this by looking at the original FlashPhoto makefile and emulating their structure, by which I found out what the -g flag does and how to properly use it.</span></p><p class="c1 c2"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c1 c2"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This, however, was not the end of the work there, as we needed to set it up so that calling &lsquo;make&rsquo; actually runs the tests. &nbsp;Thus, I made a new target: &lsquo;tests&rsquo;, which had EXECUTABLES as a dependency, which would run all of the tests when called. &nbsp;So, when &lsquo;make&rsquo; is called, a directory for the .o files is created, all of the (test).o files are compiled, FlashPhoto.o is compiled, any libraries that need compilation are compiled, the executables are linked and created, and then they are all run. &nbsp;When they are run, they print out the tool or filter that is being tested and whether the test is a success or failure.</span></p><p class="c0 c2"><span></span></p><p class="c1 c2"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For makefile programming, there wasn&rsquo;t a whole lot of leeway in the syntax for style, but I did learn a lot about using variables in makefiles instead of hard-coding everything in, which made the job a lot easier.</span></p></body></html>
